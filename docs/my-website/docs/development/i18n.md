---
sidebar_position: 3
---

# Internationalization (i18n)

Multi-language support using `i18next`.

## Supported Languages

- ðŸ‡¬ðŸ‡§ English (`en-US`)
- ðŸ‡µðŸ‡± Polski (`pl-PL`) - Primary
- ðŸ‡©ðŸ‡ª Deutsch (`de-DE`)

## How It Works

Our setup is optimized for performance and automation:

* **Lazy Loading:** Translation files (`.json`) are not bundled into the main application. They are loaded on-demand from the `/public/locales/` directory when a user selects a language.
* **Automatic Detection:** The user's language is automatically detected on the first app load, in the following order:
    1.  Check `localStorage` (looking for the `app_language` key).
    2.  If not found, check the browser's language setting (`navigator`).
* **Choice Persistence:** The selected language is automatically saved to `localStorage` (`app_language`) for future visits.

## Usage

To use translations in a component, use the `useT` hook:

```typescript
import { useT } from "@shared/hooks/utils/useT";

function MyComponent() {
Â  // The hook returns an object; we destructure the 't' function
Â  const { t } = useT();
Â  
Â  return (
Â  Â  <div>
Â  Â  Â  <h1>{t("welcome.title")}</h1>
Â  Â  Â  <p>{t("welcome.description")}</p>
Â  Â  </div>
Â  );
}
```
## Translation Files

#### Location `public/locales`
```typescript
// public/locales/en.json
{
"welcome": {
Â  Â  "title": "Welcome to AI Planner",
Â  Â  "description": "Your personal planning assistant"
Â  }
}
```
## Language Switching
Language switching is managed centrally by the PreferencesContext to ensure synchronization with other user settings.

Do not call i18n.changeLanguage() directly. Instead, use the setLanguage function from the context.

```typescript
import { useContext } from "react";
import { PreferencesContext } from "@shared/context/PreferencesContext";

// Example of a language switching component

function LanguageSelector() {
  // Get the preferences context
Â  const context = useContext(PreferencesContext);
Â  
Â  if (!context) {
Â  Â  return null; // Or handle the missing context error
Â  }

  // Destructure the current language and the function to change it
Â  const { language, setLanguage } = context;

Â  return (
Â  Â  <select
Â  Â  Â  value={language}
Â  Â  Â  onChange={(e) => setLanguage(e.target.value as "en" | "pl" | "de")}
Â  Â  >
Â  Â  Â  <option value="en-US">English</option>
Â  Â  Â  <option value="pl-PL">Polski</option>
Â  Â  Â  <option value="de-DE">Deutsch</option>
Â  Â  </select>
Â  );
}
```